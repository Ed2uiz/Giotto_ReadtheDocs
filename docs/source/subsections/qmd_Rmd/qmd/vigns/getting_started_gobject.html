<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-10-12">

<title>getting_started_gobject</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="getting_started_gobject_files/libs/clipboard/clipboard.min.js"></script>
<script src="getting_started_gobject_files/libs/quarto-html/quarto.js"></script>
<script src="getting_started_gobject_files/libs/quarto-html/popper.min.js"></script>
<script src="getting_started_gobject_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="getting_started_gobject_files/libs/quarto-html/anchor.min.js"></script>
<link href="getting_started_gobject_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="getting_started_gobject_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="getting_started_gobject_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="getting_started_gobject_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="getting_started_gobject_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">getting_started_gobject</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 12, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="how-to-create-a-giotto-object" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> How to create a Giotto Object</h1>
<p>In this tutorial, the methodology and syntax to create a <strong>giottoObject</strong> is shown and osmFISH data is used throughout the tutorial.</p>
<section id="import-giotto-and-download-the-data" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="import-giotto-and-download-the-data"><span class="header-section-number">1.1</span> Import Giotto and Download the Data</h2>
<p>To download this data, please ensure that <a href="https://www.gnu.org/software/wget/?">wget</a> is installed locally.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Giotto)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>genv_exists <span class="ot">=</span> <span class="fu">checkGiottoEnvironment</span>()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span>genv_exists){</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The following command need only be run once to install the Giotto environment.</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">installGiottoEnvironment</span>()</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify path from which data may be retrieved/stored</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>data_directory <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">getwd</span>(),<span class="st">'/gobject_data/'</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively, "/path/to/where/the/data/lives/"</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify path to which results may be saved</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>results_directory <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">getwd</span>(),<span class="st">'/gobject_results/'</span>) </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively, "/path/to/store/the/results/"</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Download osmFISH dataset to data_directory</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">getSpatialDataset</span>(<span class="at">dataset =</span> <span class="st">'osmfish_SS_cortex'</span>, <span class="at">directory =</span> data_directory, <span class="at">method =</span> <span class="st">'wget'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="minimum-requirements-for-a-giotto-object" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="minimum-requirements-for-a-giotto-object"><span class="header-section-number">1.2</span> Minimum requirements for a Giotto Object</h2>
<ul>
<li>Expression matrix</li>
<li>Spatial locations (<em>unnecessary for scRNAseq analysis</em>)</li>
</ul>
<p>Here, creating a <strong>giottoObject</strong> with the minimum requirements is shown in two examples. Data formatting guidelines are shown below this code block.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 1.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Giotto object using data directly from file paths </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>osm_exprs <span class="ot">=</span> <span class="fu">paste0</span>(data_directory, <span class="st">"osmFISH_prep_expression.txt"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>osm_locs <span class="ot">=</span> <span class="fu">paste0</span>(data_directory, <span class="st">"osmFISH_prep_cell_coordinates.txt"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>minimum_gobject1 <span class="ot">=</span> <span class="fu">createGiottoObject</span>(<span class="at">expression =</span> osm_exprs,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">spatial_locs =</span> osm_locs)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Example 2.</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a Giotto object using objects already loaded into workspace</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>expression_matrix <span class="ot">=</span> <span class="fu">readExprMatrix</span>(<span class="at">path =</span> osm_exprs) <span class="co"># fast method to read expression matrix</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>cell_locations <span class="ot">=</span> data.table<span class="sc">::</span><span class="fu">fread</span>(<span class="at">file =</span> osm_locs)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>minimum_gobject2 <span class="ot">=</span> <span class="fu">createGiottoObject</span>(<span class="at">expression =</span> expression_matrix,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">spatial_locs =</span> cell_locations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Expression file formatting
</summary>
<p><br> Expression count matrices accepted by Giotto should have columns correlating to individual cells (<strong>cell IDs</strong>) and rows to individual features (<strong>feature IDs</strong>).<br>
<strong>data.table</strong> objects and text-based files ie: (<strong>.csv, .tsv, .txt</strong>) to be read in should have column 1 be <strong>feature IDs</strong>.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th style="text-align: left;">feat_ID</th>
<th>Cell_1</th>
<th>Cell_2</th>
<th>Cell_3</th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td style="text-align: left;">Gene1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td style="text-align: left;">Gene2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td style="text-align: left;">Gene3</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td style="text-align: left;">…</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><br> <strong>matrix</strong> and <strong>DelayedMatrix</strong> objects should have <strong>feature IDs</strong> already incorporated as the rownames.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th>Cell_1</th>
<th>Cell_2</th>
<th>Cell_3</th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Gene1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;">Gene2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gene3</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td style="text-align: left;">…</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</details>
<details>
<summary>
Locations file formatting
</summary>
<p><br> Numerical columns will be interpreted in order of x, y, and (optionally) z coordinate. The first non-numerical column will be taken as <strong>cell IDs</strong></p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>sdimx</th>
<th>sdimy</th>
<th>sdimz</th>
<th>cell_ID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</details>
<p><strong>*Note:</strong> multiple expression files during can be given at once during Giotto object creation by using a named list.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arbitrary modifications</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>scaled_matrix <span class="ot">=</span> expression_matrix <span class="sc">*</span> <span class="fl">1.2</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>custom_matrix <span class="ot">=</span> expression_matrix <span class="sc">*</span> <span class="fl">0.5</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Provide multiple expression matrices at once to the Giotto Object</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># If these matrices are stored in files rather than in the workspace,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># file paths may be provided instead of variables</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>multi_expr_gobject <span class="ot">=</span> <span class="fu">createGiottoObject</span>(<span class="at">expression =</span> <span class="fu">list</span>(<span class="at">raw =</span> expression_matrix,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                                                          <span class="at">scaled =</span> scaled_matrix,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                                                          <span class="at">custom =</span> custom_matrix),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">spatial_locs =</span> cell_locations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="customizing-the-giotto-object" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="customizing-the-giotto-object"><span class="header-section-number">1.3</span> Customizing the Giotto Object</h2>
<p>By providing values to other <strong>createGiottoObject</strong> parameters, it is possible to add:</p>
<ul>
<li><p><strong>Cell</strong> or <strong>feature (gene) metadata</strong>: see <a href="../reference/addCellMetadata.html"><strong>addCellMetadata</strong></a> and <a href="../reference/addFeatMetadata.html"><strong>addFeatMetadata</strong></a></p></li>
<li><p><strong>Spatial networks</strong> or <strong>grids</strong>: see <a href="./Visualizations.html">Visualizations</a></p></li>
<li><p><strong>Dimension reduction</strong>: see <a href="./dimension_reduction.html">Clustering</a></p></li>
<li><p><strong>Images</strong>: see <a href="./getting_started_images.html">Imaging</a></p></li>
<li><p><strong>giottoInstructions</strong>: see <a href="../docs/reference/createGiottoInstructions.html"><strong>createGiottoInstructions</strong></a> and below</p></li>
</ul>
<p>Providing <strong>giottoInstructions</strong> allows the specification of:</p>
<ul>
<li>An alternative python path if using the Giotto Environment (default) is not desired<br>
</li>
<li>A directory to which resulting plots will save</li>
<li>Plot formatting</li>
</ul>
<p>There are four functions to utilize when setting instructions:</p>
<ul>
<li><strong>createGiottoInstructions</strong>: creates instructions that are provided to <strong>createGiottoObject</strong></li>
<li><strong>showGiottoInstructions</strong>: displays the instructions of a Giotto object<br>
</li>
<li><strong>changeGiottoInstructions</strong>: replaces 1 or more of the instruction parameters (e.g.&nbsp;plotting format)<br>
</li>
<li><strong>replaceGiottoInstructions</strong>: replaces all instructions with new instructions (e.g after subsetting)</li>
</ul>
<p>Here is an example of a more customized Giotto object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify data with file paths </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>osm_exprs <span class="ot">=</span> <span class="fu">paste0</span>(data_directory, <span class="st">"osmFISH_prep_expression.txt"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>osm_locs <span class="ot">=</span> <span class="fu">paste0</span>(data_directory, <span class="st">"osmFISH_prep_cell_coordinates.txt"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>meta_path <span class="ot">=</span> <span class="fu">paste0</span>(data_directory, <span class="st">"osmFISH_prep_cell_metadata.txt"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create instructions</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: Specify a path to a Python executable within a conda or miniconda </span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># environment. If set to NULL (default), the Python executable within the previously</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># installed Giotto environment will be used.</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>my_python_path <span class="ot">=</span> <span class="cn">NULL</span> <span class="co"># alternatively, "/local/python/path/python" if desired.</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>instrs <span class="ot">=</span> <span class="fu">createGiottoInstructions</span>(<span class="at">python_path =</span> my_python_path,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">save_dir =</span> results_directory,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">plot_format =</span> <span class="st">'png'</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">dpi =</span> <span class="dv">200</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">height =</span> <span class="dv">9</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">width =</span> <span class="dv">9</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Giotto object</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>custom_gobject <span class="ot">=</span> <span class="fu">createGiottoObject</span>(<span class="at">expression =</span> osm_exprs,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">spatial_locs =</span> osm_locs,                                      </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">instructions =</span> instrs)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Add field annotations as cell metadata</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>metadata <span class="ot">=</span> data.table<span class="sc">::</span><span class="fu">fread</span>(<span class="at">file =</span> meta_path)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>custom_gobject <span class="ot">=</span> <span class="fu">addCellMetadata</span>(custom_gobject, <span class="at">new_metadata =</span> metadata,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">by_column =</span> T, <span class="at">column_cell_ID =</span> <span class="st">'CellID'</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which Giotto instructions are associated with the Giotto object</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a><span class="fu">showGiottoInstructions</span>(custom_gobject)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that although parameters <em>show_plot</em>, <em>return_plot</em>, and <em>save_plot</em> were not specified within the call to <strong>createGiottoInstructions</strong>, default values were provided to these instruction parameters. All instruction parameters have default values, such that <strong>createGiottoInstructions</strong> may be called with some or no arguments yet all instruction parameters will have a value after its execution.</p>
<p>Alternatively, a named list may also be provided to the <em>instructions</em> argument of <strong>createGiottoObject</strong>. However, ensure that all arguments to <a href="../docs/reference/createGiottoInstructions.html"><strong>createGiottoInstructions</strong></a> are defined when providing instructions as a named list, since default values are only applied to instructions when made with <strong>createGiottoInstructions</strong>. <em>Note that python_path must be specified when providing instructions as a named list, and may not be provided as NULL.</em></p>
<p>The <strong>giottoInstructions</strong> may be changed, or completely replaced:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change a previously set parameter, e.g. change dpi = 200 to dpi = 300</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>custom_gobject <span class="ot">=</span> <span class="fu">changeGiottoInstructions</span>(custom_gobject, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">param =</span> <span class="st">'dpi'</span>, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">new_value =</span> <span class="dv">300</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Observe that the instructions have changed</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">showGiottoInstructions</span>(custom_gobject)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new instructions using a named list</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>sub_results_directory <span class="ot">=</span> <span class="fu">paste0</span>(results_directory, <span class="st">'specific_results/'</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>my_python_path <span class="ot">=</span> custom_gobject<span class="sc">@</span>instructions<span class="sc">$</span>python_path</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>new_instrs <span class="ot">=</span> <span class="fu">list</span>(<span class="at">python_path =</span> my_python_path,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">show_plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">return_plot =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">save_plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">save_dir =</span> sub_results_directory,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">plot_format =</span> <span class="st">'jpg'</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">dpi =</span> <span class="dv">250</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">units =</span> <span class="st">'in'</span>,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">height =</span> <span class="dv">12</span>,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">is_docker =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Change all instructions</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>custom_gobject <span class="ot">=</span> <span class="fu">replaceGiottoInstructions</span>(custom_gobject,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">instructions =</span> new_instrs)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Observe that the instructions have changed</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="fu">showGiottoInstructions</span>(custom_gobject)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="plotting-data-from-a-giotto-object" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="plotting-data-from-a-giotto-object"><span class="header-section-number">1.4</span> Plotting Data from a Giotto Object</h2>
<p>Each plotting function in Giotto has three important binary parameters:</p>
<ul>
<li><strong>show_plot</strong>: print the plot to the console, default is TRUE<br>
</li>
<li><strong>return_plot</strong>: return the plot as an object, default is TRUE<br>
</li>
<li><strong>save_plot</strong>: automatically save the plot, default is FALSE</li>
</ul>
<p>These parameters are stored within a <strong>giottoObject</strong> that was provided instructions from <strong>createGiottoInstructions</strong> and are provided to plotting functions accordingly. To change these parameters from the default values, the instructions may be changed or replaced, or these parameters may be <em>manually overwritten</em> within plotting functions.</p>
<p>See <a href="../docs/reference/showSaveParameters.html">showSaveParameters</a> and the <a href="./getting_started_saving.html">Saving Options</a> tutorial for alternative methods to save plots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot according to Giotto Instructions (default)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spatPlot</span>(custom_gobject)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot clusters, create, and save to a new subdirectory, all while overwriting formatting</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spatPlot</span>(custom_gobject, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cell_color =</span> <span class="st">'ClusterName'</span>, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">save_plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">return_plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">show_plot =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">save_param =</span> <span class="fu">list</span>(<span class="at">save_folder =</span> <span class="st">'plots/'</span>, <span class="co"># Create subdirectory</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">save_name =</span> <span class="st">'cell_clusters'</span>, </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>                           <span class="at">save_format =</span> <span class="st">'png'</span>, </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                           <span class="at">units =</span> <span class="st">'in'</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>                           <span class="at">base_height =</span> <span class="dv">9</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>                           <span class="at">base_width =</span> <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="/images/images_pkgdown/getting_started_figs/getting_started_gobject/cell_clusters.png" class="img-fluid"></p>
</section>
</section>
<section id="giotto-object-structure" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Giotto Object Structure</h1>
<p><br> Usage of the Giotto package revolves around the <strong>giottoObject</strong>. This is an S4 object class that holds spatial expression data and facilitates its manipulation and visualization with the Giotto package’s functions. Additional metadata and other outputs generated from certain Giotto functions, which may used in downstream analyses, are also be stored within the <strong>giottoObject</strong>. Its self-contained nature renders a convenient representation of the entire spatial experiment and is why most Giotto functions take a given <strong>giottoObject</strong> as input and return a <strong>giottoObject</strong> as output.</p>
<p>Data is organized within the <strong>giottoObject</strong> in defined <strong>slots</strong> as described in the diagram below.<br>
<br> <img src="/images/images_pkgdown/getting_started_figs/getting_started_gobject/Giotto_suite_object-01.svg" class="img-fluid" style="width:100.0%"><br>
<img src="/images/images_pkgdown/getting_started_figs/getting_started_gobject/Giotto_suite_object-02.svg" class="img-fluid" style="width:100.0%"><br>
<img src="/images/images_pkgdown/getting_started_figs/getting_started_gobject/Giotto_suite_object-03.svg" class="img-fluid" style="width:100.0%"></p>
</section>
<section id="nested-organization-of-the-giotto-object" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Nested Organization of the Giotto Object</h1>
<p>Spatial data has tiered organization and thus so too does Giotto. Tissue regions can be divided down into individual cells and then further into organelles. The data structure of Giotto mirrors biological structure by nesting data within slots related to spatial data by <strong>spat_unit</strong> (spatial unit). Additonally, to facilitate the integration of multiple -omic data, slots related to feature data will be nested with <strong>feat_type</strong> (feature type). <br><br>
Included below is a description of this nesting and also, for advanced users and contributors/developers, accessor functions for the slots are also provided. <br></p>
<section id="slots-and-subnesting" class="level3" data-number="3.0.1">
<h3 data-number="3.0.1" class="anchored" data-anchor-id="slots-and-subnesting"><span class="header-section-number">3.0.1</span> Slots and Subnesting</h3>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Slot</th>
<th style="text-align: left;">Nested</th>
<th style="text-align: left;">Example</th>
<th style="text-align: left;">Accessors</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="expression">@expression</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #E88EBB;">feat_type</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #E88EBB;">rna</span>-<span style="color: #801C34;">raw</span></td>
<td style="text-align: left;">get_expression_values()<br>set_expression_values()<br>showGiottoExpression()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="cell_metadata">@cell_metadata</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #E88EBB;">feat_type</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #E88EBB;">rna</span></td>
<td style="text-align: left;">pDataDT()<br>addCellMetadata()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="feat_metadata">@feat_metadata</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #E88EBB;">feat_type</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #E88EBB;">rna</span></td>
<td style="text-align: left;">fDataDT()<br>addFeatMetadata()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="spatial_grid">@spatial_grid</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">grid</span>-<span style="color: #801C34;">grid</span></td>
<td style="text-align: left;">get_spatialGrid()<br>set_spatialGrid()<br>showGiottoSpatGrids()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="nn_network">@nn_network</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #F6851F;">method</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #F6851F;">sNN</span>-<span style="color: #801C34;">sNN_results1</span></td>
<td style="text-align: left;">get_NearestNetwork()<br>set_NearestNetwork()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="dimension_reduction">@dimension_reduction</span></strong></td>
<td style="text-align: left;"><span style="color: #6C04D0;">approach</span>-<span style="color: #4C94A0;">spat_unit</span>-<span style="color: #E88EBB;">feat_type</span>-<span style="color: #F6851F;">method</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #6C04D0;">cells</span>-<span style="color: #4C94A0;">cell</span>-<span style="color: #E88EBB;">rna</span>-<span style="color: #F6851F;">pca</span>-<span style="color: #801C34;">pca</span></td>
<td style="text-align: left;">get_dimReduction()<br>set_dimReduction()<br>showGiottoDimRed()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="spatial_enrichment">@spatial_enrichment</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #E88EBB;">feat_type</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #E88EBB;">rna</span>-<span style="color: #801C34;">results1</span></td>
<td style="text-align: left;">get_spatial_enrichment()<br>set_spatial_enrichment()<br>showGiottoSpatEnrichments()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="spatial_info">@spatial_info</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span></td>
<td style="text-align: left;">get_polygon_info()<br>set_polygon_info()<br>showGiottoSpatialInfo()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="spatial_locs">@spatial_locs</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #801C34;">raw</span></td>
<td style="text-align: left;">get_spatial_locations()<br>set_spatial_locations()<br>showGiottoSpatLocs()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="spatial_network">@spatial_network</span></strong></td>
<td style="text-align: left;"><span style="color: #4C94A0;">spat_unit</span>-<span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #4C94A0;">cell</span>-<span style="color: #801C34;">Delaunay_network1</span></td>
<td style="text-align: left;">get_spatialNetwork()<br>set_spatialNetwork()<br>showGiottoSpatNetworks()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="feat_info">@feat_info</span></strong></td>
<td style="text-align: left;"><span style="color: #E88EBB;">feat_type</span></td>
<td style="text-align: left;"><span style="color: #E88EBB;">rna</span></td>
<td style="text-align: left;">get_feature_info()<br>set_feature_info()<br>showGiottoFeatInfo()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="images">@images</span></strong></td>
<td style="text-align: left;"><span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #801C34;">image</span></td>
<td style="text-align: left;">getGiottoImage()<br>addGiottoImage()<br>showGiottoImageNames()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="largeImages">@largeImages</span></strong></td>
<td style="text-align: left;"><span style="color: #801C34;">name</span></td>
<td style="text-align: left;"><span style="color: #801C34;">image</span></td>
<td style="text-align: left;">getGiottoImage()<br>addGiottoImage()<br>showGiottoImageNames()</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="instructions">@instructions</span></strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">replaceGiottoInstructions()<br>showGiottoInstructions()</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="OS_platform">@OS_platform</span></strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong><span class="citation" data-cites="join_info">@join_info</span></strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong><span class="citation" data-cites="parameters">@parameters</span></strong></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col style="width: 100%">
</colgroup>
<tbody>
<tr class="odd">
<td><pre><code> Slot         |               Nested             |         Example         |          Accessors     |</code></pre>
<p>====================================================================================================+ <strong><span class="citation" data-cites="expression">@expression</span></strong> |<span style="color: #4C94A0;">spat_unit</span>-<span style="color: #E88EBB;">feat_type</span>-<span style="color: #801C34;">name</span> |<span style="color: #4C94A0;">cell</span>-<span style="color: #E88EBB;">rna</span>-<span style="color: #801C34;">raw</span>|get_expression_values( | | | |set_expression_values() | | | |showGiottoExpression() |</p></td>
</tr>
</tbody>
</table>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>